Version 4
SHEET 1 880 680
WIRE 192 -48 80 -48
WIRE 192 16 192 -48
WIRE 208 16 192 16
WIRE 272 16 272 -48
WIRE 80 48 80 32
WIRE 80 48 32 48
WIRE -160 80 -464 80
WIRE 80 80 80 48
WIRE 192 144 192 16
WIRE 208 144 192 144
WIRE -160 160 -272 160
WIRE -48 160 -160 160
WIRE 80 160 16 160
WIRE 144 160 80 160
WIRE 272 160 272 16
WIRE 368 160 272 160
WIRE 144 176 144 160
WIRE 208 176 144 176
WIRE -464 208 -464 80
WIRE -272 224 -272 160
WIRE -464 336 -464 288
WIRE -272 336 -272 288
WIRE -272 336 -464 336
WIRE -160 336 -160 240
WIRE -160 336 -272 336
FLAG -768 288 0
FLAG -672 128 0
FLAG -576 128 0
FLAG 240 192 0
FLAG -672 48 Vref
FLAG -576 48 VPow
FLAG 240 128 VPow
FLAG -464 336 0
FLAG -768 208 Vsense
FLAG 32 48 Vref
FLAG 368 160 Vout
FLAG 368 240 0
SYMBOL Opamps\\UniversalOpamp2 240 160 R0
SYMATTR InstName U1
SYMBOL voltage -576 32 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vpow
SYMATTR Value 9
SYMBOL voltage -768 192 R0
WINDOW 3 148 110 Bottom 2
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vsense
SYMATTR Value SINE(1 10 5 0 0.1 0.1 10)
SYMATTR Value2 AC 4 0
SYMBOL voltage -672 32 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vref
SYMATTR Value 2
SYMBOL res -176 64 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL voltage -464 192 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vcc
SYMATTR Value 5
SYMBOL res -176 144 R0
WINDOW 3 36 76 Invisible 2
SYMATTR InstName R2
SYMATTR Value R=limit(40k, 140k, 100k+V(Vsense)*1000)
SYMBOL cap -48 176 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1
SYMATTR Value 4.7µF
SYMBOL cap 208 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value 10µF
SYMBOL res 64 64 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 64 -64 R0
SYMATTR InstName R4
SYMATTR Value 7.2k
SYMBOL res 176 -32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 27k
SYMBOL res 352 144 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL Noise -272 256 R0
SYMATTR InstName X1
TEXT -344 -8 Left 2 !.tran 0 0.1 0
